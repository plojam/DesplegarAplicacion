<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" >
<h:head>
    <title>Anular Factura</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
	<meta name="description" content="Start your development with a Dashboard for Bootstrap 4."/>
	<meta name="author" content="Creative Tim"/>
	<!-- Favicon -->
	<link rel="icon" href="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/img/brand/favicon.png" type="image/png"/>
	<!-- Fonts -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700"/>
	<!-- Icons -->
	<link rel="stylesheet" href="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/vendor/nucleo/css/nucleo.css" type="text/css"/>
	<link rel="stylesheet" href="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css" type="text/css"/>
	<!-- Argon CSS -->
	<link rel="stylesheet" href="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/css/argon.css?v=1.2.0" type="text/css"/>
</h:head>
<h:body class="bg-default">
    
	<nav id="navbar-main" class="navbar navbar-horizontal navbar-transparent navbar-main navbar-expand-lg navbar-light">
	    <div class="container">
	      <a class="navbar-brand" href="InicioEmpleado.jsf">
	        <img src="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/img/brand/logo_ups.png"/>
	      </a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="navbar-toggler-icon"></span>
	      </button>
	      <div class="navbar-collapse navbar-custom-collapse collapse" id="navbar-collapse">
	        <hr class="d-lg-none" />
	        <ul class="navbar-nav align-items-lg-center ml-lg-auto">
	          <li class="nav-item">
	            <a class="nav-link nav-link-icon" href="https://www.facebook.com/UPSalesianaEc" target="_blank">
	              <i class="fab fa-facebook-square"></i>
	              <span class="nav-link-inner--text d-lg-none">Facebook</span>
	            </a>
	          </li>
	          <li class="nav-item">
	            <a class="nav-link nav-link-icon" href="https://github.com/Robbyn07/PracticaDeLaboratorio03EJB-JSF-JPA" target="_blank">
	              <i class="fab fa-github"></i>
	              <span class="nav-link-inner--text d-lg-none">Github</span>
	            </a>
	          </li>
	        </ul>
	      </div>
	    </div>
	</nav>   
    
    <div class="main-content" id="panel">
    
    	<div class="header bg-gradient-primary py-7 py-lg-8 pt-lg-9">
	      <div class="container">
	        <div class="header-body text-center mb-7">
	          <div class="row justify-content-center">
	            <div class="col-xl-5 col-lg-6 col-md-8 px-5">
	              <h1 class="text-white">Anular Factura</h1>   
	            </div>
	          </div>
	        </div>
	      </div>
	    </div>
    
    	<div class="container mt--8 pb-5">
    		<div class="row justify-content-center">
    			<div class="col-lg-5 col-md-7"> 
    				<div class="card bg-secondary border-0 mb-0">
    					<div class="card-body px-lg-5 py-lg-5">
    						<h:form role="form">
    						
    							<div class="form-group mb-3">
					                <div class="input-group-prepend">
								  		<h:inputText pt:placeholder="Buscar por Cedula" class="form-control" id="ced" value="#{anularFacturaControler.cedula}" type="text"/>
    									
    									<div class="col">
    										<h:commandButton value="Buscar por Cedula" action="#{anularFacturaControler.buscarPorCedula}"  update="list:facturas" class="btn btn-primary"/>
    									</div>
						   			</div>	
					   			</div>
					   		
					   			<div class="form-group mb-3">
					                <div class="input-group-prepend">
								   		<h:inputText pt:placeholder="Buscar por Codigo" class="form-control" id="od" value="#{anularFacturaControler.id}" type="text"/>
    									
    									<div class="col">
    										<h:commandButton value="Buscar por Codigo" action="#{anularFacturaControler.buscarPorId}"  update="list:facturas" class="btn btn-primary"/>
    									</div>
						   			</div>	
					   			</div>
					   			
					   			<div class="text-center">
					   				<h:commandButton class="btn btn-primary" value="Salir" action="#{anularFacturaControler.salir}"/>
					   			</div>
    						</h:form>	
    					</div>
    				</div>
    			</div>
    		</div>
    	</div>
		
		<h:form id="facturas" role="form">	
			<div class="row" id="listaDetalles">
			
				<div class="col">
					<div class="card">	
			            <div class="table-responsive">
			    		
				    		<h:dataTable value="#{anularFacturaControler.cabeceras}" var="c" 
					    	styleClass="table align-items-center table-dark table-flush" headerClass="thead-light" rowClasses="filaPar, filaImpar">
					   			<h:column>
					   				<f:facet name="header" id="proid">CODIGO</f:facet>#{c.id}
					   			</h:column>
					   			<h:column>
					   				<f:facet name="header" id="proid">FECHA</f:facet>#{c.fecha}
					   			</h:column>
					   			<h:column>
					   				<f:facet name="header" id="proid">SUBTOTAL</f:facet>#{c.subtotal}
					   			</h:column>
					   			<h:column>
					   				<f:facet name="header" id="proid">IVA</f:facet>#{c.iva}
					   			</h:column>
					   			<h:column>
					   				<f:facet name="header" id="proid">TOTAL</f:facet>#{c.total}
					   			</h:column>
						   		<h:column>
					   				<f:facet name="header" id="proid">DETALLE</f:facet>
					   				<h:commandButton value="Ver Detalle" action="#{anularFacturaControler.mostrarDetalles(c)}" update="list:detalles" class="btn btn-primary"/>
					   			</h:column>
					   			<h:column>
					   				<f:facet name="header" id="proid">ANULAR</f:facet>
					   				<h:commandButton value="Anular" action="#{anularFacturaControler.anularFactura(c)}" update="list:detalles" class="btn btn-primary"/>
					   			</h:column>
							</h:dataTable>
		         		</div>
			    	</div>
				</div>
				
				<div class="col">
					<h:dataTable id="detalles" value="#{anularFacturaControler.detalles}" var="d" 
					styleClass="table align-items-center table-dark table-flush" headerClass="thead-light" rowClasses="filaPar, filaImpar">
			   			<h:column>
			   				<f:facet name="header" id="proid">Bodega</f:facet>#{d.producto.bodegas.get(0).nombre}
			   			</h:column>
			   			<h:column>
			   				<f:facet name="header" id="proid">Producto</f:facet>#{d.producto.nombre}
			   			</h:column>
			   			<h:column>
			   				<f:facet name="header" id="proid">Cantidad</f:facet>#{d.cantidad}
			   			</h:column>
			   			<h:column>
			   				<f:facet name="header" id="proid">Total</f:facet>#{d.total}
			   			</h:column>
			   		</h:dataTable>
				</div>
			</div>
		</h:form>
    </div>
  	
  	<!-- Argon Scripts -->
	<!-- Core -->
	<script src="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/vendor/jquery/dist/jquery.min.js"></script>
	<script src="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/vendor/js-cookie/js.cookie.js"></script>
	<script src="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js"></script>
	<script src="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js"></script>
	<!-- Argon JS -->
	<script src="/PracticaDeLaboratorio03EJB-JSF-JPA/assets/js/argon.js?v=1.2.0"></script>
  	
</h:body>
</html>